<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="Track your daily health habits - water, sleep, exercise, meals, and mood">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Health">
    
    <title>Daily Health</title>
    
    <link rel="manifest" href="manifest.json">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            900: '#0c4a6e',
                        },
                        accent: {
                            500: '#8b5cf6', // Violet
                            600: '#7c3aed',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            -webkit-tap-highlight-color: transparent;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background-color: #f8fafc;
            overscroll-behavior-y: none;
        }

        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Glassmorphism utilities */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-dark {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        input[type="date"]::-webkit-calendar-picker-indicator {
            background: transparent;
            bottom: 0;
            color: transparent;
            cursor: pointer;
            height: auto;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            width: auto;
        }
    </style>
</head>
<body class="text-slate-800 bg-slate-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icons = {
            Home: ({ active }) => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill={active ? "currentColor" : "none"} stroke="currentColor" strokeWidth={active ? "0" : "2"} className={active ? "text-brand-600" : "text-slate-400"}>
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                </svg>
            ),
            List: ({ active }) => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={active ? "text-brand-600" : "text-slate-400"}>
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <line x1="3" y1="6" x2="3.01" y2="6"></line>
                    <line x1="3" y1="12" x2="3.01" y2="12"></line>
                    <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
            ),
            Chart: ({ active }) => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={active ? "text-brand-600" : "text-slate-400"}>
                    <path d="M18 20V10"></path>
                    <path d="M12 20V4"></path>
                    <path d="M6 20v-6"></path>
                </svg>
            ),
            Droplet: ({ className }) => (
                <svg viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
                </svg>
            ),
            Moon: ({ className }) => (
                <svg viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            ),
            Bolt: ({ className }) => (
                <svg viewBox="0 0 24 24" fill="currentColor" className={className}>
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                </svg>
            ),
            ChevronLeft: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            ),
            ChevronRight: () => (
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            ),
            Trash: () => (
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            )
        };

        // --- COMPONENTS ---

        const Card = ({ children, className = "", delay = "0s" }) => (
            <div 
                className={`bg-white rounded-3xl p-5 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100 animate-slide-up ${className}`}
                style={{ animationDelay: delay }}
            >
                {children}
            </div>
        );

        const MetricRing = ({ percentage, color, icon: Icon, value, label }) => {
            const radius = 35;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (percentage / 100) * circumference;

            return (
                <div className="flex flex-col items-center justify-center p-2">
                    <div className="relative w-24 h-24 flex items-center justify-center">
                        <svg className="transform -rotate-90 w-24 h-24">
                            <circle
                                cx="48"
                                cy="48"
                                r={radius}
                                stroke="currentColor"
                                strokeWidth="8"
                                fill="transparent"
                                className="text-slate-100"
                            />
                            <circle
                                cx="48"
                                cy="48"
                                r={radius}
                                stroke="currentColor"
                                strokeWidth="8"
                                fill="transparent"
                                strokeDasharray={circumference}
                                strokeDashoffset={offset}
                                strokeLinecap="round"
                                className={`${color} transition-all duration-1000 ease-out`}
                            />
                        </svg>
                        <div className={`absolute inset-0 flex items-center justify-center ${color}`}>
                            <Icon className="w-6 h-6" />
                        </div>
                    </div>
                    <div className="text-center mt-2">
                        <div className="font-bold text-slate-800 text-lg">{value}</div>
                        <div className="text-xs text-slate-500 font-medium uppercase tracking-wide">{label}</div>
                    </div>
                </div>
            );
        };

        function HealthTracker() {
            const [activeTab, setActiveTab] = useState('add');
            const [entries, setEntries] = useState([]);
            const [showSuccess, setShowSuccess] = useState(false);
            const [currentEntry, setCurrentEntry] = useState({
                date: new Date().toISOString().split('T')[0],
                water: 0,
                sleep: 0,
                exercise: 0,
                mood: 'neutral',
                meals: '',
                notes: ''
            });

            useEffect(() => {
                const saved = localStorage.getItem('healthEntries');
                if (saved) setEntries(JSON.parse(saved).sort((a, b) => new Date(b.date) - new Date(a.date)));
                
                // Register Service Worker
                if ('serviceWorker' in navigator) navigator.serviceWorker.register('./sw.js');
            }, []);

            const saveEntries = (newEntries) => {
                setEntries(newEntries);
                localStorage.setItem('healthEntries', JSON.stringify(newEntries));
            };

            const handleSubmit = () => {
                const newEntry = { ...currentEntry, id: Date.now().toString() };
                saveEntries([newEntry, ...entries]);
                
                // Reset form
                setCurrentEntry({
                    ...currentEntry,
                    water: 0, sleep: 0, exercise: 0, meals: '', notes: ''
                });
                
                // Show Success Animation
                setShowSuccess(true);
                setTimeout(() => setShowSuccess(false), 2000);
            };

            const moods = [
                { id: 'terrible', emoji: 'üò´', label: 'Rough' },
                { id: 'bad', emoji: 'üòï', label: 'Meh' },
                { id: 'neutral', emoji: 'üòê', label: 'Okay' },
                { id: 'good', emoji: 'üôÇ', label: 'Good' },
                { id: 'great', emoji: 'ü§©', label: 'Super' }
            ];

            // Calculate Stats for Summary
            const getStats = () => {
                const last7 = entries.slice(0, 7);
                if (!last7.length) return null;
                
                const totals = last7.reduce((acc, curr) => ({
                    water: acc.water + (curr.water || 0),
                    sleep: acc.sleep + (curr.sleep || 0),
                    exercise: acc.exercise + (curr.exercise || 0)
                }), { water: 0, sleep: 0, exercise: 0 });

                return {
                    water: (totals.water / last7.length).toFixed(1),
                    sleep: (totals.sleep / last7.length).toFixed(1),
                    exercise: (totals.exercise / last7.length).toFixed(0),
                    streak: last7.length
                };
            };

            const stats = getStats();

            return (
                <div className="min-h-screen pb-24 relative overflow-hidden bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200">
                    
                    {/* TOP HEADER */}
                    <div className="sticky top-0 z-30 glass px-6 py-4 flex justify-between items-center mb-6">
                        <div>
                            <p className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-0.5">
                                {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}
                            </p>
                            <h1 className="text-2xl font-extrabold text-slate-900 tracking-tight">
                                Hello, User <span className="inline-block animate-pulse-slow">üëã</span>
                            </h1>
                        </div>
                        <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-brand-500 to-accent-500 p-[2px]">
                            <div className="w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden">
                                <img src={`https://api.dicebear.com/7.x/notionists/svg?seed=Felix`} alt="avatar" />
                            </div>
                        </div>
                    </div>

                    {/* MAIN CONTENT AREA */}
                    <div className="px-5 max-w-lg mx-auto space-y-6">
                        
                        {/* --- TAB: ADD ENTRY (HOME) --- */}
                        {activeTab === 'add' && (
                            <div className="space-y-6 animate-fade-in">
                                
                                {/* Date Picker Card */}
                                <Card>
                                    <div className="relative flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <div className="p-2 bg-brand-50 rounded-xl text-brand-600">
                                                <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                            </div>
                                            <div>
                                                <label className="text-xs text-slate-400 font-bold uppercase tracking-wider block">Tracking For</label>
                                                <div className="font-semibold text-slate-800">{new Date(currentEntry.date).toDateString()}</div>
                                            </div>
                                        </div>
                                        <input 
                                            type="date" 
                                            value={currentEntry.date}
                                            onChange={(e) => setCurrentEntry({...currentEntry, date: e.target.value})}
                                            className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                        />
                                        <div className="pointer-events-none text-slate-300">
                                            <Icons.ChevronRight />
                                        </div>
                                    </div>
                                </Card>

                                {/* Mood Selector */}
                                <div>
                                    <h3 className="text-lg font-bold text-slate-800 mb-4 px-2">How do you feel?</h3>
                                    <div className="flex justify-between gap-2 overflow-x-auto pb-2 no-scrollbar">
                                        {moods.map((m) => (
                                            <button
                                                key={m.id}
                                                onClick={() => setCurrentEntry({...currentEntry, mood: m.id})}
                                                className={`flex flex-col items-center gap-2 p-3 rounded-2xl transition-all duration-300 min-w-[70px] ${
                                                    currentEntry.mood === m.id 
                                                    ? 'bg-slate-900 text-white shadow-lg scale-110' 
                                                    : 'bg-white text-slate-400 hover:bg-slate-50'
                                                }`}
                                            >
                                                <span className="text-3xl filter drop-shadow-sm">{m.emoji}</span>
                                                <span className="text-xs font-medium">{m.label}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Metrics Grid */}
                                <div className="grid grid-cols-2 gap-4">
                                    {/* Water */}
                                    <Card className="relative overflow-hidden group">
                                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                                            <Icons.Droplet className="w-16 h-16 text-brand-500" />
                                        </div>
                                        <label className="text-slate-500 text-xs font-bold uppercase tracking-wider">Water</label>
                                        <div className="flex items-end gap-1 mt-2 mb-4">
                                            <span className="text-4xl font-extrabold text-brand-600">{currentEntry.water}</span>
                                            <span className="text-sm font-medium text-slate-400 mb-1.5">glasses</span>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setCurrentEntry(c => ({...c, water: Math.max(0, c.water - 1)}))} className="w-8 h-8 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center hover:bg-slate-200 font-bold">-</button>
                                            <button onClick={() => setCurrentEntry(c => ({...c, water: c.water + 1}))} className="w-8 h-8 rounded-full bg-brand-500 text-white flex items-center justify-center shadow-lg shadow-brand-500/30 hover:bg-brand-600 font-bold">+</button>
                                        </div>
                                    </Card>

                                    {/* Sleep */}
                                    <Card className="relative overflow-hidden group">
                                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                                            <Icons.Moon className="w-16 h-16 text-accent-500" />
                                        </div>
                                        <label className="text-slate-500 text-xs font-bold uppercase tracking-wider">Sleep</label>
                                        <div className="flex items-end gap-1 mt-2 mb-4">
                                            <span className="text-4xl font-extrabold text-accent-600">{currentEntry.sleep}</span>
                                            <span className="text-sm font-medium text-slate-400 mb-1.5">hours</span>
                                        </div>
                                        <div className="flex gap-2">
                                            <button onClick={() => setCurrentEntry(c => ({...c, sleep: Math.max(0, c.sleep - 0.5)}))} className="w-8 h-8 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center hover:bg-slate-200 font-bold">-</button>
                                            <button onClick={() => setCurrentEntry(c => ({...c, sleep: c.sleep + 0.5}))} className="w-8 h-8 rounded-full bg-accent-500 text-white flex items-center justify-center shadow-lg shadow-accent-500/30 hover:bg-accent-600 font-bold">+</button>
                                        </div>
                                    </Card>

                                    {/* Exercise (Full Width) */}
                                    <Card className="col-span-2 flex items-center justify-between">
                                        <div>
                                            <label className="text-slate-500 text-xs font-bold uppercase tracking-wider">Exercise</label>
                                            <div className="flex items-end gap-1 mt-1">
                                                <span className="text-3xl font-extrabold text-emerald-500">{currentEntry.exercise}</span>
                                                <span className="text-sm font-medium text-slate-400 mb-1.5">min</span>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-4">
                                            <input 
                                                type="range" 
                                                min="0" max="180" step="10" 
                                                value={currentEntry.exercise}
                                                onChange={(e) => setCurrentEntry({...currentEntry, exercise: parseInt(e.target.value)})}
                                                className="w-32 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"
                                            />
                                            <div className="p-3 bg-emerald-50 rounded-full text-emerald-500">
                                                <Icons.Bolt className="w-6 h-6" />
                                            </div>
                                        </div>
                                    </Card>
                                </div>

                                {/* Text Inputs */}
                                <Card>
                                    <input 
                                        type="text"
                                        placeholder="What did you eat?"
                                        value={currentEntry.meals}
                                        onChange={(e) => setCurrentEntry({...currentEntry, meals: e.target.value})}
                                        className="w-full bg-transparent border-b border-slate-100 py-3 text-slate-800 placeholder-slate-400 focus:outline-none focus:border-brand-500 transition-colors"
                                    />
                                    <input 
                                        type="text"
                                        placeholder="Add a note..."
                                        value={currentEntry.notes}
                                        onChange={(e) => setCurrentEntry({...currentEntry, notes: e.target.value})}
                                        className="w-full bg-transparent py-3 text-slate-800 placeholder-slate-400 focus:outline-none mt-2"
                                    />
                                </Card>

                                {/* Submit Button */}
                                <button 
                                    onClick={handleSubmit}
                                    className="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-xl shadow-slate-900/20 active:scale-95 transition-all duration-200 flex items-center justify-center gap-2"
                                >
                                    {showSuccess ? (
                                        <span className="animate-pulse">Saved! üéâ</span>
                                    ) : (
                                        "Save Entry"
                                    )}
                                </button>
                                <div className="h-8"></div>
                            </div>
                        )}

                        {/* --- TAB: SUMMARY (CHARTS) --- */}
                        {activeTab === 'summary' && (
                            <div className="space-y-6 animate-fade-in">
                                <h2 className="text-2xl font-bold text-slate-900">Weekly Summary</h2>
                                
                                {stats ? (
                                    <>
                                        <Card className="flex justify-between items-center py-8">
                                            <MetricRing 
                                                percentage={(stats.water / 8) * 100} 
                                                value={stats.water} 
                                                label="Water" 
                                                color="text-brand-500" 
                                                icon={Icons.Droplet}
                                            />
                                            <MetricRing 
                                                percentage={(stats.sleep / 8) * 100} 
                                                value={stats.sleep} 
                                                label="Sleep" 
                                                color="text-accent-500" 
                                                icon={Icons.Moon}
                                            />
                                            <MetricRing 
                                                percentage={(stats.exercise / 45) * 100} 
                                                value={stats.exercise} 
                                                label="Activity" 
                                                color="text-emerald-500" 
                                                icon={Icons.Bolt}
                                            />
                                        </Card>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-gradient-to-br from-brand-500 to-brand-600 rounded-3xl p-5 text-white shadow-lg shadow-brand-500/25">
                                                <div className="text-brand-100 text-sm font-medium mb-1">Total Entries</div>
                                                <div className="text-3xl font-bold">{entries.length}</div>
                                            </div>
                                            <div className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-5 text-white shadow-lg shadow-slate-800/25">
                                                <div className="text-slate-400 text-sm font-medium mb-1">Current Streak</div>
                                                <div className="text-3xl font-bold">{stats.streak} <span className="text-lg">days</span></div>
                                            </div>
                                        </div>
                                    </>
                                ) : (
                                    <div className="text-center py-20 opacity-50">
                                        <p>No enough data yet.</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* --- TAB: HISTORY (LIST) --- */}
                        {activeTab === 'history' && (
                            <div className="space-y-4 animate-fade-in">
                                <h2 className="text-2xl font-bold text-slate-900 mb-4">History</h2>
                                
                                {entries.length === 0 ? (
                                    <div className="text-center py-20 text-slate-400">
                                        <p>No entries found.</p>
                                    </div>
                                ) : (
                                    entries.map((entry, idx) => (
                                        <div key={entry.id} className="bg-white rounded-2xl p-4 shadow-sm border border-slate-100 flex justify-between items-center animate-slide-up" style={{animationDelay: `${idx * 0.05}s`}}>
                                            <div className="flex items-center gap-4">
                                                <div className="w-12 h-12 rounded-full bg-slate-50 flex items-center justify-center text-2xl">
                                                    {moods.find(m => m.id === entry.mood)?.emoji || 'üòê'}
                                                </div>
                                                <div>
                                                    <div className="font-bold text-slate-800">{entry.date}</div>
                                                    <div className="text-xs text-slate-400 font-medium flex gap-2">
                                                        <span>üíß {entry.water}</span>
                                                        <span>üí§ {entry.sleep}h</span>
                                                        <span>‚ö° {entry.exercise}m</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button 
                                                onClick={() => {
                                                    const newEntries = entries.filter(e => e.id !== entry.id);
                                                    saveEntries(newEntries);
                                                }}
                                                className="text-slate-300 hover:text-red-400 p-2 transition-colors"
                                            >
                                                <Icons.Trash />
                                            </button>
                                        </div>
                                    ))
                                )}
                            </div>
                        )}
                    </div>

                    {/* BOTTOM NAVIGATION DOCK */}
                    <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2 w-[90%] max-w-sm glass-dark rounded-full p-2 flex justify-between items-center shadow-2xl z-50">
                        <button 
                            onClick={() => setActiveTab('add')}
                            className={`flex-1 py-3 rounded-full flex justify-center transition-all duration-300 ${activeTab === 'add' ? 'bg-white shadow-md transform -translate-y-1' : 'hover:bg-white/10'}`}
                        >
                            <Icons.Home active={activeTab === 'add'} />
                        </button>
                        <button 
                            onClick={() => setActiveTab('history')}
                            className={`flex-1 py-3 rounded-full flex justify-center transition-all duration-300 ${activeTab === 'history' ? 'bg-white shadow-md transform -translate-y-1' : 'hover:bg-white/10'}`}
                        >
                            <Icons.List active={activeTab === 'history'} />
                        </button>
                        <button 
                            onClick={() => setActiveTab('summary')}
                            className={`flex-1 py-3 rounded-full flex justify-center transition-all duration-300 ${activeTab === 'summary' ? 'bg-white shadow-md transform -translate-y-1' : 'hover:bg-white/10'}`}
                        >
                            <Icons.Chart active={activeTab === 'summary'} />
                        </button>
                    </div>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HealthTracker />);
    </script>
</body>
</html>
