<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Health Ultimate</title>
    
    <link rel="manifest" href="manifest.json">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: { 900: '#000000', 800: '#0f0f11', 700: '#1c1c1e' },
                        neon: { blue: '#2997FF', purple: '#BF5AF2', green: '#30D158', orange: '#FF9F0A', red: '#FF453A' }
                    },
                    fontFamily: { sans: ['SF Pro Display', '-apple-system', 'BlinkMacSystemFont', 'Inter', 'sans-serif'] },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pop': 'pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                        'slide-in': 'slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        pop: { '0%': { transform: 'scale(0.9)', opacity: 0 }, '100%': { transform: 'scale(1)', opacity: 1 } },
                        slideIn: { '0%': { transform: 'translateY(20px)', opacity: 0 }, '100%': { transform: 'translateY(0)', opacity: 1 } },
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #000; color: #fff; -webkit-tap-highlight-color: transparent; overscroll-behavior: none; }
        .glass { background: rgba(28, 28, 30, 0.65); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
        .glass-nav { background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-top: 1px solid rgba(255,255,255,0.08); }
        .neon-text { text-shadow: 0 0 20px rgba(41, 151, 255, 0.5); }
        input[type="range"] { -webkit-appearance: none; background: transparent; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; height: 24px; width: 24px; border-radius: 50%; background: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.5); margin-top: -10px; }
        input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- PARTICLE SYSTEM ---
        const Confetti = ({ active }) => {
            const canvasRef = useRef(null);
            useEffect(() => {
                if (!active) return;
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                let particles = [];
                const colors = ['#2997FF', '#BF5AF2', '#30D158', '#FF9F0A'];
                
                for(let i=0; i<100; i++) {
                    particles.push({
                        x: window.innerWidth/2, y: window.innerHeight/2,
                        vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15,
                        life: 1, color: colors[Math.floor(Math.random()*colors.length)],
                        size: Math.random()*8 + 2
                    });
                }

                const animate = () => {
                    ctx.clearRect(0,0,canvas.width,canvas.height);
                    particles.forEach((p, i) => {
                        p.x += p.vx; p.y += p.vy; p.vy += 0.5; p.life -= 0.02;
                        ctx.fillStyle = p.color; ctx.globalAlpha = Math.max(0, p.life);
                        ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
                        if(p.life <= 0) particles.splice(i, 1);
                    });
                    if(particles.length > 0) requestAnimationFrame(animate);
                };
                animate();
            }, [active]);
            if (!active) return null;
            return <canvas ref={canvasRef} className="fixed inset-0 pointer-events-none z-50" />;
        };

        // --- ICONS ---
        const Icons = {
            Drop: ({c}) => <svg className={c} viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>,
            Moon: ({c}) => <svg className={c} viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>,
            Fire: ({c}) => <svg className={c} viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 2C13.5 2 8 6.5 8 11C8 14 10.5 16 13 16C16 16 18.5 13.5 18.5 10.5C18.5 10.5 19.5 12 19.5 13C19.5 17 16.5 20.5 12.5 20.5C8.5 20.5 5.5 17 5.5 13C5.5 9 8 5.5 8 5.5"/></svg>,
            Plus: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" strokeWidth="3" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"/></svg>,
            Chart: ({a}) => <svg className={`w-7 h-7 transition-colors ${a?'text-neon-blue':'text-gray-500'}`} fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"/></svg>,
            Home: ({a}) => <svg className={`w-7 h-7 transition-colors ${a?'text-neon-blue':'text-gray-500'}`} fill={a?"currentColor":"none"} stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>,
            List: ({a}) => <svg className={`w-7 h-7 transition-colors ${a?'text-neon-blue':'text-gray-500'}`} fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        };

        // --- COMPONENTS ---
        const Card = ({ children, className = "", delay = 0 }) => (
            <div className={`glass rounded-[30px] p-6 animate-pop ${className}`} style={{animationDelay: `${delay}ms`}}>
                {children}
            </div>
        );

        const BezierChart = ({ data, color, height = 80 }) => {
            if (data.length < 2) return null;
            const max = Math.max(...data) || 10;
            const pts = data.map((val, i) => [
                (i / (data.length - 1)) * 100, 
                100 - (val / max) * 100
            ]);
            
            // Simple smoothing
            const path = pts.reduce((acc, [x, y], i, arr) => {
                if (i === 0) return `M ${x},${y}`;
                const [px, py] = arr[i - 1];
                const cpx1 = px + (x - px) / 2;
                const cpx2 = x - (x - px) / 2;
                return `${acc} C ${cpx1},${py} ${cpx2},${y} ${x},${y}`;
            }, "");

            return (
                <div className="relative w-full overflow-hidden" style={{height}}>
                    <svg viewBox="0 0 100 100" preserveAspectRatio="none" className="w-full h-full overflow-visible">
                        <defs>
                            <linearGradient id={`grad-${color}`} x1="0" y1="0" x2="0" y2="1">
                                <stop offset="0%" stopColor={color} stopOpacity="0.4"/>
                                <stop offset="100%" stopColor={color} stopOpacity="0"/>
                            </linearGradient>
                        </defs>
                        <path d={`${path} L 100,100 L 0,100 Z`} fill={`url(#grad-${color})`} />
                        <path d={path} fill="none" stroke={color} strokeWidth="3" strokeLinecap="round" vectorEffect="non-scaling-stroke" />
                    </svg>
                </div>
            );
        };

        function App() {
            const [tab, setTab] = useState('home');
            const [entries, setEntries] = useState([]);
            const [confetti, setConfetti] = useState(false);
            const [today, setToday] = useState({
                date: new Date().toISOString().split('T')[0],
                water: 0, sleep: 0, exercise: 0, mood: 'neutral'
            });

            useEffect(() => {
                const saved = localStorage.getItem('ultHealth');
                if (saved) setEntries(JSON.parse(saved).sort((a,b) => new Date(b.date)-new Date(a.date)));
            }, []);

            const save = () => {
                const newE = [{...today, id: Date.now()}, ...entries];
                setEntries(newE);
                localStorage.setItem('ultHealth', JSON.stringify(newE));
                setConfetti(true);
                setTimeout(() => setConfetti(false), 3000);
                setToday({...today, water:0, sleep:0, exercise:0});
            };

            const getHistoryData = (key) => entries.slice(0, 7).map(e => e[key] || 0).reverse();

            // Background Gradient Blobs
            const Bg = () => (
                <div className="fixed inset-0 z-[-1] overflow-hidden bg-black">
                    <div className="absolute -top-[20%] -left-[10%] w-[600px] h-[600px] bg-neon-blue/20 rounded-full blur-[120px] animate-float"></div>
                    <div className="absolute top-[40%] -right-[10%] w-[500px] h-[500px] bg-neon-purple/20 rounded-full blur-[120px] animate-float" style={{animationDelay: '-3s'}}></div>
                    <div className="absolute -bottom-[20%] left-[20%] w-[600px] h-[600px] bg-neon-green/10 rounded-full blur-[120px] animate-float" style={{animationDelay: '-5s'}}></div>
                </div>
            );

            return (
                <div className="min-h-screen pb-32 text-white font-sans selection:bg-neon-blue selection:text-white">
                    <Bg />
                    <Confetti active={confetti} />
                    
                    {/* TOP BAR */}
                    <div className="px-6 pt-14 pb-4 flex justify-between items-end animate-slide-in">
                        <div>
                            <div className="text-neon-blue text-xs font-bold uppercase tracking-[0.2em] mb-1">
                                {new Date().toLocaleDateString('en-US', {weekday:'long', day:'numeric'})}
                            </div>
                            <h1 className="text-4xl font-black tracking-tight">Health<span className="text-neon-blue">.</span></h1>
                        </div>
                        <div className="w-12 h-12 rounded-full border-2 border-white/10 bg-dark-700 overflow-hidden relative">
                            <img src="https://api.dicebear.com/7.x/notionists/svg?seed=Max" className="w-full h-full" />
                        </div>
                    </div>

                    <div className="px-5 space-y-6 max-w-lg mx-auto">
                        
                        {/* --- HOME TAB --- */}
                        {tab === 'home' && (
                            <>
                                {/* WATER CARD */}
                                <Card delay={0} className="relative overflow-hidden group">
                                    <div className="flex justify-between items-start z-10 relative">
                                        <div>
                                            <div className="text-sm text-white/50 font-bold uppercase tracking-wider mb-1">Hydration</div>
                                            <div className="text-5xl font-black font-mono tracking-tighter">
                                                {today.water}<span className="text-lg text-neon-blue ml-1">/8</span>
                                            </div>
                                        </div>
                                        <div className="p-3 bg-neon-blue/20 rounded-2xl text-neon-blue">
                                            <Icons.Drop c="w-8 h-8" />
                                        </div>
                                    </div>
                                    {/* Liquid Background Effect */}
                                    <div className="absolute bottom-0 left-0 right-0 bg-neon-blue/20 transition-all duration-500 ease-out" 
                                         style={{height: `${(today.water/8)*100}%`}}></div>
                                    
                                    <div className="flex gap-3 mt-6 relative z-10">
                                        <button onClick={()=>setToday(t=>({...t, water: Math.max(0, t.water-1)}))} className="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center text-xl font-bold active:scale-90 transition">-</button>
                                        <button onClick={()=>setToday(t=>({...t, water: t.water+1}))} className="flex-1 h-12 rounded-full bg-neon-blue text-black font-bold flex items-center justify-center gap-2 active:scale-95 transition shadow-[0_0_20px_rgba(41,151,255,0.4)]">
                                            <Icons.Plus /> Add Glass
                                        </button>
                                    </div>
                                </Card>

                                {/* BENTO GRID FOR SLEEP & EXERCISE */}
                                <div className="grid grid-cols-2 gap-4">
                                    <Card delay={100} className="bg-gradient-to-br from-dark-700 to-dark-800 border-none">
                                        <Icons.Moon c="w-8 h-8 text-neon-purple mb-4" />
                                        <div className="text-3xl font-black">{today.sleep}<span className="text-sm text-white/40">h</span></div>
                                        <div className="text-xs text-neon-purple font-bold uppercase tracking-wider mb-4">Sleep</div>
                                        <div className="flex justify-between bg-black/20 rounded-full p-1">
                                            <button onClick={()=>setToday(t=>({...t, sleep: Math.max(0, t.sleep-0.5)}))} className="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center">-</button>
                                            <button onClick={()=>setToday(t=>({...t, sleep: t.sleep+0.5}))} className="w-8 h-8 rounded-full bg-neon-purple text-white flex items-center justify-center">+</button>
                                        </div>
                                    </Card>

                                    <Card delay={200} className="bg-gradient-to-br from-dark-700 to-dark-800 border-none">
                                        <Icons.Fire c="w-8 h-8 text-neon-green mb-4" />
                                        <div className="text-3xl font-black">{today.exercise}<span className="text-sm text-white/40">m</span></div>
                                        <div className="text-xs text-neon-green font-bold uppercase tracking-wider mb-4">Activity</div>
                                        <input type="range" min="0" max="120" step="10" value={today.exercise} 
                                            onChange={e=>setToday({...today, exercise: parseInt(e.target.value)})} 
                                            className="w-full accent-neon-green" />
                                    </Card>
                                </div>

                                {/* MOOD SLIDER */}
                                <Card delay={300}>
                                    <div className="text-sm text-white/50 font-bold uppercase tracking-wider mb-4">Mood Check</div>
                                    <div className="flex justify-between">
                                        {['üò´','üòï','üòê','üôÇ','ü§©'].map((m,i) => (
                                            <button key={i} onClick={()=>setToday({...today, mood: m})} 
                                                className={`text-3xl transition-all duration-300 p-2 rounded-2xl ${today.mood===m ? 'bg-white/20 scale-125' : 'opacity-40 grayscale'}`}>
                                                {m}
                                            </button>
                                        ))}
                                    </div>
                                </Card>

                                <button onClick={save} className="w-full py-5 rounded-[25px] bg-white text-black font-black text-lg shadow-[0_0_30px_rgba(255,255,255,0.3)] active:scale-95 transition-all transform hover:-translate-y-1">
                                    COMPLETE DAY
                                </button>
                            </>
                        )}

                        {/* --- ANALYTICS TAB --- */}
                        {tab === 'analytics' && (
                            <div className="space-y-6">
                                <Card className="border-t-4 border-neon-blue">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="font-bold text-lg">Hydration Trend</h3>
                                        <span className="text-xs text-neon-blue font-mono">LAST 7 DAYS</span>
                                    </div>
                                    <BezierChart data={getHistoryData('water')} color="#2997FF" />
                                </Card>

                                <Card className="border-t-4 border-neon-purple">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="font-bold text-lg">Sleep Quality</h3>
                                        <span className="text-xs text-neon-purple font-mono">LAST 7 DAYS</span>
                                    </div>
                                    <BezierChart data={getHistoryData('sleep')} color="#BF5AF2" />
                                </Card>
                            </div>
                        )}
                        
                        {/* --- HISTORY TAB --- */}
                        {tab === 'history' && (
                            <div className="space-y-4">
                                {entries.map((e, i) => (
                                    <div key={e.id} className="glass p-5 rounded-3xl flex items-center justify-between animate-slide-in" style={{animationDelay: i*50+'ms'}}>
                                        <div className="flex items-center gap-4">
                                            <div className="text-3xl bg-white/5 p-3 rounded-2xl">{e.mood || 'üòê'}</div>
                                            <div>
                                                <div className="font-bold text-lg">{e.date}</div>
                                                <div className="text-xs text-white/50 flex gap-3 mt-1 font-mono">
                                                    <span className="text-neon-blue">üíß {e.water}</span>
                                                    <span className="text-neon-purple">üåô {e.sleep}h</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                                {entries.length === 0 && <div className="text-center text-white/30 py-20 font-mono">NO DATA RECORDED</div>}
                            </div>
                        )}
                    </div>

                    {/* FLOATING DOCK */}
                    <div className="fixed bottom-8 left-1/2 transform -translate-x-1/2 w-[85%] max-w-sm z-40">
                        <div className="glass-nav rounded-full p-2 flex justify-between items-center shadow-[0_20px_40px_rgba(0,0,0,0.5)]">
                            {['home', 'analytics', 'history'].map((t) => (
                                <button key={t} onClick={()=>setTab(t)} 
                                    className={`w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 ${tab===t ? 'bg-white text-black shadow-lg scale-110' : 'text-white/50 hover:text-white'}`}>
                                    {t==='home' && <Icons.Home a={tab===t} />}
                                    {t==='analytics' && <Icons.Chart a={tab===t} />}
                                    {t==='history' && <Icons.List a={tab===t} />}
                                </button>
                            ))}
                        </div>
                    </div>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
